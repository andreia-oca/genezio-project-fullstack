# Learn more about Genezio YAML at https://genezio.com/docs/project-structure/genezio-configuration-file/
# The name of the project.
name: genezio-project
# The region where the project is deployed.
region: eu-central-1
# The version of the Genezio YAML configuration to parse.
yamlVersion: 2
backend:
  # The root directory of the backend.
  path: server
  # Information about the backend's programming language.
  language:
    # The name of the programming language.
    name: ts
    # The package manager used by the backend.
    packageManager: npm
  # Scripts are running in the specified `path` directory.
  scripts:
    # List of scripts to run before deploying the backend.
    deploy: npm install
    # List of scripts to run before starting `genezio local`.
    local: npm install
  functions:
    # The name (label) of the function.
    - name: hello-world
      # The path to the function's code.
      path: ./
      # The name of the function handler
      handler: handler
      # The entry point for the function.
      entry: index.mjs
      # The type of handler used by the function.
      type: aws
# Information about the frontend, including the path, language, and publish directory.
# It is optional. It can also be an array if there are multiple frontends you want to deploy.
frontend:
  path: client
  sdk:
    language: ts
  publish: dist
  scripts:
    deploy:
      - npm install
    build: VITE_BACKEND_URL=https://5cc4a86c-3cb2-4366-b434-3aa9dc10b6b2.dev-fkt.cloud.genez.io npm run build
    # build: VITE_BACKEND_URL=${{helloWorldApiUrl}}npm run build
    # build: REACT_APP_BACKEND_URL=${{helloWorldApiUrl}} npm run build
    # build: <FRAMEWORK>_BACKEND_URL_1=${{<functionName>ApiUrl}} <FRAMEWORK>_BACKEND_URL_2=${{<functionName>ApiUrl}} npm run build
    start:
      - npm install --silent
      - VITE_BACKEND_URL=https://5cc4a86c-3cb2-4366-b434-3aa9dc10b6b2.dev-fkt.cloud.genez.io npm run dev --silent
      # - VITE_BACKEND_URL=${{helloWorldApiUrl}} npm run dev --silent
